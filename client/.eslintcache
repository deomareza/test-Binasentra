[{"E:\\PROJECTS\\FrontendTest\\client\\src\\index.js":"1","E:\\PROJECTS\\FrontendTest\\client\\src\\App.js":"2","E:\\PROJECTS\\FrontendTest\\client\\src\\reportWebVitals.js":"3","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\index.jsx":"4","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\Navbar.jsx":"5","E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\index.jsx":"6","E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\Home.jsx":"7","E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\AdminDashboard.jsx":"8","E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\CustomerDashboard.jsx":"9","E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\Login.jsx":"10","E:\\PROJECTS\\FrontendTest\\client\\src\\query\\index.jsx":"11","E:\\PROJECTS\\FrontendTest\\client\\src\\config\\graphql.js":"12","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserUpdate.jsx":"13","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserRequestForm.jsx":"14","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserCheckPremi.jsx":"15","E:\\PROJECTS\\FrontendTest\\client\\src\\helpers\\premiCalculate.jsx":"16","E:\\PROJECTS\\FrontendTest\\client\\src\\helpers\\currencify.jsx":"17","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserRequestList.jsx":"18","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\AdminRequestList.jsx":"19","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\AdminOkupasi.jsx":"20"},{"size":597,"mtime":1608715470557,"results":"21","hashOfConfig":"22"},{"size":1202,"mtime":1608984352418,"results":"23","hashOfConfig":"22"},{"size":362,"mtime":499162500000,"results":"24","hashOfConfig":"22"},{"size":323,"mtime":1608976076679,"results":"25","hashOfConfig":"22"},{"size":310,"mtime":1608708445654,"results":"26","hashOfConfig":"22"},{"size":162,"mtime":1608709172991,"results":"27","hashOfConfig":"22"},{"size":722,"mtime":1608708060881,"results":"28","hashOfConfig":"22"},{"size":724,"mtime":1608980032902,"results":"29","hashOfConfig":"22"},{"size":1893,"mtime":1609052824266,"results":"30","hashOfConfig":"22"},{"size":1810,"mtime":1608714938057,"results":"31","hashOfConfig":"22"},{"size":2425,"mtime":1608981861578,"results":"32","hashOfConfig":"22"},{"size":328,"mtime":1609069201831,"results":"33","hashOfConfig":"22"},{"size":2010,"mtime":1609052849938,"results":"34","hashOfConfig":"22"},{"size":5777,"mtime":1608984154712,"results":"35","hashOfConfig":"22"},{"size":3180,"mtime":1609052958768,"results":"36","hashOfConfig":"22"},{"size":267,"mtime":1608963704516,"results":"37","hashOfConfig":"22"},{"size":435,"mtime":1608963380574,"results":"38","hashOfConfig":"22"},{"size":1707,"mtime":1608967745220,"results":"39","hashOfConfig":"22"},{"size":2669,"mtime":1609039448766,"results":"40","hashOfConfig":"22"},{"size":2718,"mtime":1609068489101,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"45"},"91vh87",{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"45"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"45"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"45"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"45"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"45"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"45"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"45"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"45"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"E:\\PROJECTS\\FrontendTest\\client\\src\\index.js",["92"],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter, Route} from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n",["93","94"],"E:\\PROJECTS\\FrontendTest\\client\\src\\App.js",["95","96"],"import \"./App.css\"\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\"\nimport { Navbar } from \"./components/\"\nimport { Home, AdminDashboard, CustomerDashboard, Login } from \"./pages/\"\nimport { ApolloProvider } from \"@apollo/client\"\nimport { client } from \"./config/graphql\"\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <ApolloProvider client={client}>\n        <Switch>\n          <Route path=\"/login\">\n            <Login />\n          </Route>\n          <Route path=\"/admin\">\n            <AdminDashboard />\n          </Route>\n          <Route path=\"/customer\">\n            <CustomerDashboard />\n          </Route>\n          <Route path=\"/customer/premi\">\n            <CustomerDashboard />\n          </Route>\n          <Route exact path=\"/\">\n            {localStorage.getItem(\"userInfo\") ? (\n              JSON.parse(localStorage.getItem(\"userInfo\")).role === \"admin\" ? (\n                <Redirect to=\"/admin\" />\n              ) : (\n                <Redirect to=\"/customer\" />\n              )\n            ) : (\n              <Redirect to=\"/login\" />\n            )}\n          </Route>\n        </Switch>\n      </ApolloProvider>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","E:\\PROJECTS\\FrontendTest\\client\\src\\reportWebVitals.js",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\components\\index.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\components\\Navbar.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\index.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\Home.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\AdminDashboard.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\CustomerDashboard.jsx",["97","98"],"import {Navbar, UserUpdate, UserRequestForm, UserCheckPremi, UserRequestList} from '../components/'\r\nimport {useHistory, Switch, Route, useRouteMatch} from 'react-router-dom'\r\nimport {useQuery} from '@apollo/client'\r\n\r\nexport function CustomerDashboard() {\r\n  const history = useHistory()\r\n  const match = useRouteMatch()\r\n\r\n  function navigateTo(path) {\r\n    history.push(path)\r\n  }\r\n\r\n  function userLogout(){\r\n    localStorage.clear()\r\n    history.push('/login')\r\n  }\r\n\r\n\r\n  return(\r\n    <Switch>\r\n      <Route path={`/customer/premi/:id`}>\r\n        <UserCheckPremi />\r\n      </Route>\r\n      \r\n      <Route path={`${match.path}/new-req`}>\r\n        <UserRequestForm />\r\n      </Route>\r\n\r\n      <Route path={match.path}>\r\n        <div className=\"flex flex-col\">\r\n          <div className=\"flex flex-col justify-start items-center py-10\">\r\n              <div className=\"flex flex-row w-full justify-around items-center\">\r\n                <h1 className=\"text-3xl mb-8\">Customer Dashboard</h1>\r\n\r\n                <div>\r\n                  <button onClick={() => navigateTo(`${match.url}/new-req`)} className=\"bg-green-200 px-5 py-2 mr-3\">Submit New Request</button>\r\n                  <button onClick={userLogout} className=\"bg-red-200 px-5 py-2\">Logout</button>\r\n\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-row w-full px-20 mt-8\">\r\n\r\n                <div className=\"flex flex-col items-center bg-gray-100 p-4 w-1/4\">\r\n                  <h1 className=\"text-2xl\">Update Details</h1>\r\n                  <UserUpdate />\r\n                </div>\r\n\r\n\r\n                <div className=\"flex flex-col items-center w-3/4 mx-4\">\r\n                  <h1 className=\"text-2xl mb-5\">User Request List</h1>\r\n                  <UserRequestList />\r\n                </div>\r\n\r\n              </div>\r\n\r\n          </div>\r\n        </div>\r\n      </Route>\r\n    </Switch>\r\n  )\r\n}","E:\\PROJECTS\\FrontendTest\\client\\src\\pages\\Login.jsx",["99","100","101","102","103"],"import {useState, useEffect} from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport {useQuery, useLazyQuery} from '@apollo/client'\r\nimport {GET_USERS, USER_LOGIN} from '../query/'\r\n\r\nexport function Login() {\r\n  // const { loading, error, data } = useQuery(GET_USERS)\r\n  const history = useHistory()\r\n  const [inputEmail, setInputEmail] = useState('')\r\n  const [ userLogin, {loading, data: userData} ] = useLazyQuery(USER_LOGIN)\r\n\r\n\r\n  useEffect(() => {\r\n    if(userData && userData.userLogin) {\r\n      let userInfo = {\r\n        _id : userData.userLogin._id,\r\n        role : userData.userLogin.role\r\n      }\r\n      localStorage.setItem('userInfo', JSON.stringify(userInfo))\r\n\r\n      switch (userData.userLogin.role) {\r\n        case 'customer':\r\n\r\n          console.log('customer')\r\n          history.push('/customer')\r\n          break;\r\n      \r\n        case 'admin' : \r\n          console.log('admin')\r\n          history.push('/admin')\r\n          break;\r\n      }\r\n    }\r\n  }, [loading, userData] )\r\n\r\n  function handleInput(e) {\r\n    setInputEmail(e.target.value)\r\n  }\r\n\r\n  function test(){\r\n    console.log(localStorage.getItem('userInfo'))\r\n  }\r\n\r\n  function handleLogin(e) {\r\n    e.preventDefault()\r\n    userLogin({\r\n      variables: {\r\n        email: inputEmail\r\n      }\r\n    })\r\n    \r\n  }\r\n\r\n  return(\r\n    <div className=\"flex px-8 py-10 justify-center\">\r\n      <div className=\"flex flex-col justify-center items-center border\">\r\n        <h1 className=\"text-2xl py-12\">Login</h1>\r\n        <form onSubmit={handleLogin} className=\"flex flex-col items-center p-12\">\r\n          <label>Email</label>\r\n          <input className=\"border px-5 py-2\" onChange={handleInput} type=\"email\"/>\r\n          <input className=\"px-8 py-2 mt-5\" type=\"submit\" />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}","E:\\PROJECTS\\FrontendTest\\client\\src\\query\\index.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\config\\graphql.js",["104"],"E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserUpdate.jsx",["105"],"import { useState, useEffect } from \"react\"\r\nimport { useQuery, useMutation } from \"@apollo/client\"\r\nimport { GET_ONE_USER, UPDATE_USER } from \"../query/\"\r\n\r\nexport function UserUpdate() {\r\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\"))\r\n  console.log(userInfo._id, '<< user info id')\r\n  const [userInput, setUserInput] = useState({ name: \"\", email: \"\" })\r\n  const { loading, error, data } = useQuery(GET_ONE_USER, {\r\n    variables: { \r\n      _id: userInfo._id \r\n    },\r\n  })\r\n\r\n  const [updateUser] = useMutation(UPDATE_USER, {\r\n    refetchQueries: [{ query: GET_ONE_USER }]\r\n  })\r\n\r\n  useEffect(() => {\r\n    if(data) {\r\n      setUserInput({\r\n        name: data.findOneUser.name,\r\n        email: data.findOneUser.email\r\n      })\r\n    }\r\n  }, [data])\r\n\r\n  function handleUserUpdate(e) {\r\n    e.preventDefault()\r\n    updateUser({\r\n      variables: {\r\n        _id: userInfo._id,\r\n        data: {\r\n          name: userInput.name,\r\n          email: userInput.email\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  function handleInput(e) {\r\n    let key = e.target.name\r\n    let value = e.target.value\r\n\r\n    setUserInput({...userInput, [key] : value})\r\n    console.log(userInput)\r\n  }\r\n\r\n  if (loading) return null\r\n\r\n  return (\r\n    <form className=\"mt-5 flex flex-col items-center\">\r\n      <div className=\"flex flex-col my-2\">\r\n        <label>Name</label>\r\n        <input\r\n          className=\"border px-1 py-2\"\r\n          onChange={handleInput}\r\n          type=\"text\"\r\n          name=\"name\"\r\n          defaultValue={data.findOneUser.name}\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col my-2\">\r\n        <label>Email</label>\r\n        <input\r\n          className=\"border px-1 py-2\"\r\n          onChange={handleInput}\r\n\r\n          type=\"email\"\r\n          name=\"email\"\r\n          defaultValue={data.findOneUser.email}\r\n        />\r\n      </div>\r\n      <button onClick={handleUserUpdate} className=\"p-2 bg-green-200 mt-5\" type=\"submit\">\r\n        Update Data\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\n","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserRequestForm.jsx",["106","107","108","109","110","111","112"],"import { useState, useEffect } from \"react\"\r\nimport { useMutation, useQuery } from \"@apollo/client\"\r\nimport { useHistory, useRouteMatch } from \"react-router-dom\"\r\nimport { client } from \"../config/graphql\"\r\nimport {\r\n  ADD_ONE_REQUEST,\r\n  GET_PREMI,\r\n  GET_OKUPASI,\r\n  GET_USER_REQUESTS,\r\n} from \"../query/\"\r\n\r\nexport function UserRequestForm() {\r\n  const history = useHistory()\r\n  const match = useRouteMatch()\r\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\"))\r\n  const { loading, error, data: okupasiData } = useQuery(GET_OKUPASI)\r\n  const [\r\n    addRequest,\r\n    { data: requestReturnData, loading: addRequestLoading },\r\n  ] = useMutation(ADD_ONE_REQUEST, {\r\n    onCompleted: (data) => {\r\n      addRequestComplete(data)\r\n    },\r\n    refetchQueries: [\r\n      { query: GET_USER_REQUESTS, variables: { _id: userInfo._id } },\r\n    ],\r\n  })\r\n\r\n  const [formInput, setFormInput] = useState({\r\n    time: 1,\r\n    okupasi: \"\",\r\n    harga: 0,\r\n    konstruksi: \"kelas 1\",\r\n    alamat: \"\",\r\n    provinsi: \"\",\r\n    kota: \"\",\r\n    kabupaten: \"\",\r\n    daerah: \"\",\r\n    gempa: false,\r\n    status: \"pending\",\r\n  })\r\n  const [inputError, setInputError] = useState(false)\r\n\r\n  function handleInputChange(e) {\r\n    let key = e.target.name\r\n    let value = e.target.value\r\n\r\n    setInputError(false)\r\n\r\n    if (key === \"time\" || key === \"harga\") {\r\n      value = +value\r\n    }\r\n\r\n    if (key === \"gempa\") {\r\n      e.target.checked ? (value = true) : (value = false)\r\n    }\r\n\r\n    setFormInput({ ...formInput, [key]: value })\r\n  }\r\n\r\n  function checkFormInput() {\r\n    for (const key in formInput) {\r\n      if (formInput[key] === \"\" || formInput[key] === \"0\") {\r\n        setInputError(true)\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  function handleFormSubmit(e) {\r\n    e.preventDefault()\r\n\r\n    if (checkFormInput()) {\r\n      addRequest({\r\n        variables: {\r\n          _id: userInfo._id,\r\n          data: formInput,\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  function addRequestComplete({ insertRequest }) {\r\n    history.push(`/customer/premi/${insertRequest._id}`)\r\n  }\r\n\r\n  if (loading) return null\r\n\r\n  return (\r\n    <div className=\"flex px-12 py-5\">\r\n      <div className=\"w-full border\">\r\n        <h1 className=\"text-2xl mb-5 text-center py-5\">\r\n          Form Request Asuransi Kebakaran\r\n        </h1>\r\n\r\n        <form onSubmit={handleFormSubmit} className=\"flex flex-col mx-14 p-5\">\r\n          <label>Jangka Waktu Pertanggungan</label>\r\n          <select\r\n            onChange={handleInputChange}\r\n            name=\"time\"\r\n            className=\"border mb-4\"\r\n          >\r\n            <option value=\"1\">1</option>\r\n            <option value=\"2\">2</option>\r\n            <option value=\"3\">3</option>\r\n            <option value=\"4\">4</option>\r\n            <option value=\"5\">5</option>\r\n            <option value=\"6\">6</option>\r\n            <option value=\"7\">7</option>\r\n            <option value=\"8\">8</option>\r\n            <option value=\"9\">9</option>\r\n            <option value=\"10\">10</option>\r\n          </select>\r\n\r\n          <label>Okupasi</label>\r\n          <select\r\n            onChange={handleInputChange}\r\n            name=\"okupasi\"\r\n            className=\"border  mb-4\"\r\n            defaultValue=\"\"\r\n          >\r\n            <option value=\"\" disabled>\r\n              -- Select Okupasi --\r\n            </option>\r\n            {okupasiData.okupasi.map((item) => {\r\n              return (\r\n                <option key={item._id} value={item._id}>\r\n                  {item.name}\r\n                </option>\r\n              )\r\n            })}\r\n          </select>\r\n\r\n          <label>Harga Bangunan</label>\r\n          <input\r\n            onChange={handleInputChange}\r\n            name=\"harga\"\r\n            type=\"number\"\r\n            min=\"0\"\r\n            placeholder=\"0\"\r\n            className=\"border py-1 px-3  mb-4\"\r\n          />\r\n\r\n          <label>Konstruksi</label>\r\n          <select\r\n            onChange={handleInputChange}\r\n            name=\"konstruksi\"\r\n            className=\"border mb-4\"\r\n          >\r\n            <option value=\"kelas 1\">Kelas 1</option>\r\n            <option value=\"kelas 2\">Kelas 2</option>\r\n            <option value=\"kelas 3\">Kelas 3</option>\r\n          </select>\r\n\r\n          <label>Alamat Objek Pertanggungan</label>\r\n          <input\r\n            onChange={handleInputChange}\r\n            name=\"alamat\"\r\n            className=\"border py-1 px-3  mb-4\"\r\n            type=\"text\"\r\n          />\r\n\r\n          <label>Provinsi</label>\r\n          <input\r\n            onChange={handleInputChange}\r\n            name=\"provinsi\"\r\n            className=\"border py-1 px-3  mb-4\"\r\n            type=\"text\"\r\n          />\r\n\r\n          <label>Kota</label>\r\n          <input\r\n            onChange={handleInputChange}\r\n            name=\"kota\"\r\n            className=\"border py-1 px-3  mb-4\"\r\n            type=\"text\"\r\n          />\r\n\r\n          <label>Kabupaten</label>\r\n          <input\r\n            onChange={handleInputChange}\r\n            name=\"kabupaten\"\r\n            className=\"border py-1 px-3 mb-4\"\r\n            type=\"text\"\r\n          />\r\n\r\n          <label>Daerah</label>\r\n          <input\r\n            onChange={handleInputChange}\r\n            name=\"daerah\"\r\n            className=\"border py-1 px-3  mb-4\"\r\n            type=\"text\"\r\n          />\r\n\r\n          <label>Gempa Bumi</label>\r\n          <input\r\n            onChange={handleInputChange}\r\n            name=\"gempa\"\r\n            className=\"border  mb-4\"\r\n            type=\"checkbox\"\r\n          />\r\n          {inputError ? (\r\n            <h1 className=\"text-red-600\">Please fill all input</h1>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          <input type=\"submit\" value=\"Cek Premi\" className=\"bg-green-100 py-2\" />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserCheckPremi.jsx",["113","114","115","116"],"import { client } from \"../config/graphql\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { GET_ONE_REQUEST, GET_OKUPASI, GET_ONE_OKUPASI } from \"../query/\"\r\nimport { useQuery, useLazyQuery } from \"@apollo/client\"\r\nimport { premiDasar, adminFee, biayaTotal } from \"../helpers/premiCalculate\"\r\nimport { currencify } from \"../helpers/currencify\"\r\n\r\nexport function UserCheckPremi() {\r\n  const { id } = useParams()\r\n  const history = useHistory()\r\n  const [\r\n    getOneOkupasi,\r\n    { loading: okupasiLoading, data: dataOku },\r\n  ] = useLazyQuery(GET_ONE_OKUPASI)\r\n\r\n  const { loading, error, data } = useQuery(GET_ONE_REQUEST, {\r\n    variables: { _id: id },\r\n    onCompleted: ({ findOneRequest }) => {\r\n      getOneOkupasi({ variables: { _id: findOneRequest.okupasi } })\r\n    },\r\n  })\r\n\r\n  function navigateTo(path) {\r\n    history.push(path)\r\n  }\r\n\r\n  if (loading) return null\r\n\r\n  if (!data || !dataOku) return null\r\n\r\n  return (\r\n    <div className=\"flex flex-col px-20 py-10 border\">\r\n      <h1 className=\"text-3xl mb-8\">Premi Detail</h1>\r\n\r\n      <div className=\"flex flex-row justify-between\">\r\n        <div className=\"flex flex-col\">\r\n          <h1 className=\"text-xl mb-5\">Premi</h1>\r\n\r\n          <h2>Asuransi Kebakaran</h2>\r\n          <h2>Jenis Okupasi : {dataOku.findOneOkupasi.name}</h2>\r\n          <h2>No. Invoice : {data.findOneRequest.invoice}</h2>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col\">\r\n          <h1 className=\"text-xl mb-5\">Periode</h1>\r\n\r\n          <h2>{data.findOneRequest.time} tahun</h2>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col\">\r\n          <h1 className=\"text-xl mb-5\">Harga Bangunan</h1>\r\n\r\n          <h2>Rp {currencify(data.findOneRequest.harga)}</h2>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col items-end mt-5\">\r\n        <h1 className=\"text-lg\">\r\n          Premi Dasar :{\" \"}\r\n          <span>\r\n            Rp.{\" \"}\r\n            {currencify(\r\n              premiDasar(\r\n                data.findOneRequest.harga,\r\n                dataOku.findOneOkupasi.rate,\r\n                data.findOneRequest.time\r\n              )\r\n            )}\r\n          </span>\r\n        </h1>\r\n\r\n        <h1 className=\"text-lg\">\r\n          Biaya Administrasi : <span>Rp. {currencify(adminFee)}</span>\r\n        </h1>\r\n\r\n        <h1 className=\"text-2xl mt-8\">\r\n          Total :{\" \"}\r\n          <span>\r\n            Rp.{\" \"}\r\n            {currencify(\r\n              biayaTotal(\r\n                data.findOneRequest.harga,\r\n                dataOku.findOneOkupasi.rate,\r\n                data.findOneRequest.time\r\n              )\r\n            )}\r\n          </span>\r\n        </h1>\r\n      </div>\r\n      <div className=\"flex flex-row justify-between mt-10\">\r\n        <button\r\n          onClick={() => {\r\n            navigateTo(\"/customer\")\r\n          }}\r\n          className=\"px-5 py-2 bg-yellow-200\"\r\n        >\r\n          Back to Dashboard\r\n        </button>\r\n        {/* {data.findOneRequest.status !== \"approved\" ? (\r\n          <button className=\"px-5 py-2 bg-green-200 \">Pembayaran</button>\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","E:\\PROJECTS\\FrontendTest\\client\\src\\helpers\\premiCalculate.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\helpers\\currencify.jsx",[],"E:\\PROJECTS\\FrontendTest\\client\\src\\components\\UserRequestList.jsx",["117"],"import { useQuery } from \"@apollo/client\"\r\nimport {useHistory} from 'react-router-dom'\r\nimport { GET_USER_REQUESTS } from \"../query/\"\r\n\r\nexport function UserRequestList() {\r\n  const history = useHistory()\r\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\"))\r\n  console.log(userInfo)\r\n  const { loading, error, data } = useQuery(GET_USER_REQUESTS, {\r\n    variables: { _id: userInfo._id },\r\n  })\r\n\r\n  function goToRequestDetail(_id) {\r\n    history.push(`/customer/premi/${_id}`)\r\n  }\r\n\r\n  if(loading) return null\r\n\r\n  if(data.findUserRequests.length === 0 ) return(\r\n    <div>\r\n      <h1>No Requests found</h1>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n  <div className=\"w-full\">\r\n    \r\n    {/* {JSON.stringify(data)} */}\r\n\r\n    <table className=\"w-full\">\r\n      <thead>\r\n        <tr className=\"bg-gray-700 text-white font-bold\">\r\n          <th className=\"py-2\">No Polis</th>\r\n          <th>Jenis Penanggungan</th>\r\n          <th>No Invoice</th>\r\n          <th>Status</th>\r\n          <th></th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {\r\n          data.findUserRequests?.map(request => {\r\n            return(\r\n              <tr className=\"bg-gray-100 text-center\">\r\n                <td className=\"py-3\">{request.polis?request.polis:'Belum Terbit'}</td>\r\n                <td>Asuransi Kebakaran</td>\r\n                <td>{request.invoice}</td>\r\n                <td>{request.status===\"approved\"?'Sudah Dibayar':'Belum Dibayar'}</td>\r\n                <td><button className=\"bg-green-200 px-5 py-1\" onClick={() => {goToRequestDetail(request._id)}}>Cek Rincian</button></td>\r\n              </tr>\r\n            )\r\n          })\r\n        }\r\n\r\n\r\n      </tbody>\r\n    </table>\r\n  \r\n  </div>\r\n  \r\n  )\r\n}\r\n","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\AdminRequestList.jsx",["118","119"],"import { useQuery, useMutation } from \"@apollo/client\"\r\nimport { GET_ALL_REQUESTS, GET_OKUPASI, ADMIN_UPDATE_STATUS } from \"../query/\"\r\nimport { currencify } from \"../helpers/currencify\"\r\nimport { biayaTotal } from \"../helpers/premiCalculate\"\r\n\r\nexport function AdminRequestList() {\r\n  const { loading, error, data, refetch } = useQuery(GET_ALL_REQUESTS)\r\n  const { loading: loadingOku, data: dataOku } = useQuery(GET_OKUPASI)\r\n\r\n  const [adminUpdateStatus] = useMutation(ADMIN_UPDATE_STATUS, {\r\n    onCompleted: () => {\r\n      refetch()\r\n    },refetchQueries:[{query:GET_ALL_REQUESTS}]\r\n  })\r\n\r\n  const okupasiSearch = (value) => {\r\n    return dataOku.okupasi.find((item) => item._id === value)\r\n  }\r\n\r\n  const unApprovedData = () => {\r\n    return data.request.filter(el => el.status !== \"approved\")\r\n  }\r\n\r\n  function updateStatus(_id, invoice, status) {\r\n    console.log(_id)\r\n    adminUpdateStatus({ variables: { _id, invoice, status } })\r\n  }\r\n\r\n\r\n  if (loading || loadingOku) return null\r\n\r\n  return (\r\n    <div className=\"flex flex-col bg-gray-100 p-5\">\r\n      <h1 className=\"text-xl mb-2\">Request List</h1>\r\n\r\n      <table className=\"\">\r\n        <thead>\r\n          <tr className=\"bg-gray-700 text-white font-bold\">\r\n            <th className=\"py-2\">No Invoice</th>\r\n            <th>Alamat</th>\r\n            <th>Tipe Okupasi</th>\r\n            <th>Total</th>\r\n            <th>Status</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {\r\n          data.request?.map((request) => {\r\n            return (\r\n              <tr className=\"text-center py-2 bg-gray-200\">\r\n                <td>{request.invoice}</td>\r\n                <td>{request.alamat}</td>\r\n                <td>{okupasiSearch(request.okupasi).name}</td>\r\n                <td>\r\n                  Rp.{\" \"}\r\n                  {currencify(\r\n                    biayaTotal(\r\n                      request.harga,\r\n                      okupasiSearch(request.okupasi).rate,\r\n                      request.time\r\n                    )\r\n                  )}\r\n                </td>\r\n                <td>{request.status}</td>\r\n                <td>\r\n                  <button onClick={()=>{updateStatus(request._id, request.invoice, \"approved\")}} className=\"bg-green-100 px-3 py-1 my-1\">\r\n                    Approve\r\n                  </button>\r\n                  <button onClick={()=>{updateStatus(request._id, request.invoice, \"rejected\")}} className=\"bg-red-200 px-3 py-1 my-1 ml-2\">\r\n                    Reject\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            )\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n","E:\\PROJECTS\\FrontendTest\\client\\src\\components\\AdminOkupasi.jsx",["120","121","122","123","124"],{"ruleId":"125","severity":1,"message":"126","line":6,"column":24,"nodeType":"127","messageId":"128","endLine":6,"endColumn":29},{"ruleId":"129","replacedBy":"130"},{"ruleId":"131","replacedBy":"132"},{"ruleId":"125","severity":1,"message":"133","line":3,"column":10,"nodeType":"127","messageId":"128","endLine":3,"endColumn":16},{"ruleId":"125","severity":1,"message":"134","line":4,"column":10,"nodeType":"127","messageId":"128","endLine":4,"endColumn":14},{"ruleId":"125","severity":1,"message":"133","line":1,"column":9,"nodeType":"127","messageId":"128","endLine":1,"endColumn":15},{"ruleId":"125","severity":1,"message":"135","line":3,"column":9,"nodeType":"127","messageId":"128","endLine":3,"endColumn":17},{"ruleId":"125","severity":1,"message":"135","line":3,"column":9,"nodeType":"127","messageId":"128","endLine":3,"endColumn":17},{"ruleId":"125","severity":1,"message":"136","line":4,"column":9,"nodeType":"127","messageId":"128","endLine":4,"endColumn":18},{"ruleId":"137","severity":1,"message":"138","line":21,"column":7,"nodeType":"139","messageId":"140","endLine":32,"endColumn":8},{"ruleId":"141","severity":1,"message":"142","line":34,"column":6,"nodeType":"143","endLine":34,"endColumn":25,"suggestions":"144"},{"ruleId":"125","severity":1,"message":"145","line":40,"column":12,"nodeType":"127","messageId":"128","endLine":40,"endColumn":16},{"ruleId":"125","severity":1,"message":"146","line":1,"column":38,"nodeType":"127","messageId":"128","endLine":1,"endColumn":41},{"ruleId":"125","severity":1,"message":"147","line":9,"column":20,"nodeType":"127","messageId":"128","endLine":9,"endColumn":25},{"ruleId":"125","severity":1,"message":"148","line":1,"column":20,"nodeType":"127","messageId":"128","endLine":1,"endColumn":29},{"ruleId":"125","severity":1,"message":"149","line":4,"column":10,"nodeType":"127","messageId":"128","endLine":4,"endColumn":16},{"ruleId":"125","severity":1,"message":"150","line":7,"column":3,"nodeType":"127","messageId":"128","endLine":7,"endColumn":12},{"ruleId":"125","severity":1,"message":"151","line":14,"column":9,"nodeType":"127","messageId":"128","endLine":14,"endColumn":14},{"ruleId":"125","severity":1,"message":"147","line":16,"column":20,"nodeType":"127","messageId":"128","endLine":16,"endColumn":25},{"ruleId":"125","severity":1,"message":"152","line":19,"column":13,"nodeType":"127","messageId":"128","endLine":19,"endColumn":30},{"ruleId":"125","severity":1,"message":"153","line":19,"column":41,"nodeType":"127","messageId":"128","endLine":19,"endColumn":58},{"ruleId":"125","severity":1,"message":"149","line":1,"column":10,"nodeType":"127","messageId":"128","endLine":1,"endColumn":16},{"ruleId":"125","severity":1,"message":"154","line":4,"column":27,"nodeType":"127","messageId":"128","endLine":4,"endColumn":38},{"ruleId":"125","severity":1,"message":"155","line":14,"column":16,"nodeType":"127","messageId":"128","endLine":14,"endColumn":30},{"ruleId":"125","severity":1,"message":"147","line":17,"column":20,"nodeType":"127","messageId":"128","endLine":17,"endColumn":25},{"ruleId":"125","severity":1,"message":"147","line":9,"column":20,"nodeType":"127","messageId":"128","endLine":9,"endColumn":25},{"ruleId":"125","severity":1,"message":"147","line":7,"column":20,"nodeType":"127","messageId":"128","endLine":7,"endColumn":25},{"ruleId":"125","severity":1,"message":"156","line":20,"column":9,"nodeType":"127","messageId":"128","endLine":20,"endColumn":23},{"ruleId":"125","severity":1,"message":"157","line":3,"column":39,"nodeType":"127","messageId":"128","endLine":3,"endColumn":51},{"ruleId":"125","severity":1,"message":"158","line":4,"column":10,"nodeType":"127","messageId":"128","endLine":4,"endColumn":20},{"ruleId":"125","severity":1,"message":"159","line":5,"column":10,"nodeType":"127","messageId":"128","endLine":5,"endColumn":20},{"ruleId":"125","severity":1,"message":"147","line":8,"column":20,"nodeType":"127","messageId":"128","endLine":8,"endColumn":25},{"ruleId":"125","severity":1,"message":"160","line":22,"column":12,"nodeType":"127","messageId":"128","endLine":22,"endColumn":22},"no-unused-vars","'Route' is defined but never used.","Identifier","unusedVar","no-native-reassign",["161"],"no-negated-in-lhs",["162"],"'Navbar' is defined but never used.","'Home' is defined but never used.","'useQuery' is defined but never used.","'GET_USERS' is defined but never used.","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["163"],"'test' is defined but never used.","'gql' is defined but never used.","'error' is assigned a value but never used.","'useEffect' is defined but never used.","'client' is defined but never used.","'GET_PREMI' is defined but never used.","'match' is assigned a value but never used.","'requestReturnData' is assigned a value but never used.","'addRequestLoading' is assigned a value but never used.","'GET_OKUPASI' is defined but never used.","'okupasiLoading' is assigned a value but never used.","'unApprovedData' is assigned a value but never used.","'EDIT_OKUPASI' is defined but never used.","'currencify' is defined but never used.","'biayaTotal' is defined but never used.","'toggleEdit' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"164","fix":"165"},"Update the dependencies array to be: [history, loading, userData]",{"range":"166","text":"167"},[988,1007],"[history, loading, userData]"]